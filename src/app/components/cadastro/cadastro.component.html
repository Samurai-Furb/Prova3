<section class="cadastro-page">
  <h2>API RESTful - Avaliação 3</h2>

  <!-- 1. CONSULTA -->
  <div class="card-box">
    <h3>Consultar Funcionário</h3>
    <div class="input-group">
      <label>ID Numérico:</label>
      <input type="number" [(ngModel)]="idBusca" placeholder="Informe o ID">
      <button (click)="consultar()" class="btn-consultar">Consultar</button>
    </div>
  </div>

  <!-- EXIBIÇÃO DE DADOS + EXCLUSÃO -->
  <!-- Só mostra se tiver um funcionário carregado (id válido) -->
  <div class="card-box" *ngIf="funcionario.id">
    <h3>Dados do Funcionário</h3>
    
    <div class="display-fields">
      <div class="field"><strong>ID:</strong> <input readonly [value]="funcionario.id"></div>
      <div class="field"><strong>Nome:</strong> <input readonly [value]="funcionario.nome"></div>
      <div class="field"><strong>Departamento:</strong> <input readonly [value]="funcionario.departamento"></div>
      <div class="field"><strong>Endereço:</strong> <input readonly [value]="funcionario.endereco"></div>
      <div class="field"><strong>E-mail:</strong> <input readonly [value]="funcionario.email"></div>
    </div>

    <button (click)="excluir()" class="btn-excluir">Exclusão</button>
  </div>

  <!-- FEEDBACK (Status/Mensagem) -->
  <!-- A classe dinâmica muda a cor de fundo baseado no status -->
  <div *ngIf="mensagem" 
       class="feedback-msg" 
       [ngClass]="{'bg-green': status === 'Ok', 'bg-red': status === 'Erro'}">
    <strong>Status:</strong> {{ status }} <br>
    <strong>Mensagem:</strong> {{ mensagem }}
  </div>

  <!-- 2. ALTERAÇÃO -->
  <div class="card-box" *ngIf="funcionario.id">
    <h3>Alterar Cadastro</h3>
    <div class="form-grid">
      <label>ID (Fixo):</label>
      <input readonly [(ngModel)]="funcionario.id" class="readonly">

      <label>Nome:</label>
      <input [(ngModel)]="funcionario.nome">

      <label>Departamento:</label>
      <input [(ngModel)]="funcionario.departamento">

      <label>Endereço:</label>
      <input [(ngModel)]="funcionario.endereco">

      <label>E-mail:</label>
      <input [(ngModel)]="funcionario.email">
    </div>
    <button (click)="alterar()" class="btn-alterar">Alterar</button>
  </div>

  <hr>

  <!-- 3. NOVO CADASTRO (Pedido Extra) -->
  <div class="card-box">
    <h3>Cadastrar Novo Funcionário</h3>
    <div class="form-grid">
      <label>ID (Opcional/API):</label>
      <input type="number" [(ngModel)]="novoFuncionario.id" placeholder="Geralmente automático">

      <label>Nome:</label>
      <input [(ngModel)]="novoFuncionario.nome">

      <label>Departamento:</label>
      <input [(ngModel)]="novoFuncionario.departamento">

      <label>Endereço:</label>
      <input [(ngModel)]="novoFuncionario.endereco">

      <label>E-mail:</label>
      <input [(ngModel)]="novoFuncionario.email">
    </div>
    <button (click)="cadastrar()" class="btn-cadastrar">Cadastrar</button>
  </div>

</section>